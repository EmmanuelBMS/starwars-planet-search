(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=a(6),o=Object(n.createContext)([]);var i=function(){var e=Object(n.useContext)(o),t=e.state.planets,a=e.filters,l=a.filterByName.name,c=a.filterByNumericValues,i=a.order,m=i.column,s=i.sort,d=function(){var e=function(){var e=Object(u.a)(t);return"ASC"===s&&e.sort((function(e,t){var a=e[m],n=t[m];return new Intl.Collator("en",{numeric:!0}).compare(a,n)})),"DESC"===s&&e.sort((function(e,t){var a=e[m],n=t[m];return new Intl.Collator("en",{numeric:!0}).compare(n,a)})),e}();return l&&(e=e.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())}))),c.length>0&&c.forEach((function(t){var a=t.column,n=t.comparison,r=t.value;e=e.filter((function(e){switch(n){case"maior que":return Number(e[a])>Number(r);case"igual a":return Number(e[a])===Number(r);case"menor que":return Number(e[a])<Number(r);default:return!0}}))})),e};return r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation Period"),r.a.createElement("th",null,"Orbital Period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface Water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"URL"))),r.a.createElement("tbody",null,d().map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))})))))},m=a(3),s=a(1),d=a(2);var f=function(){var e=["population","orbital_period","diameter","rotation_period","surface_water"],t=Object(n.useContext)(o),a=t.filters,l=t.setFilters,c=a.filterByName.name,i=a.filterByNumericValues,f=Object(n.useState)(e),p=Object(d.a)(f,2),E=p[0],b=p[1],v=Object(n.useState)({column:"population",comparison:"maior que",value:0}),h=Object(d.a)(v,2),j=h[0],O=h[1],y=function(e){var t=e.target,a=t.name,n=t.value;O(Object(s.a)(Object(s.a)({},j),{},Object(m.a)({},a,n)))};return Object(n.useEffect)((function(){var t=i.map((function(e){return e.column})),a=[].concat(e);t.forEach((function(e){a=a.filter((function(t){return t!==e}))})),O((function(e){return Object(s.a)(Object(s.a)({},e),{},{column:a[0]})})),b(a)}),[i]),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name-filter"},"Procurar",r.a.createElement("input",{id:"name-filter","data-testid":"name-filter",placeholder:"Planet name",value:c,onChange:function(e){var t=e.target.value;l(Object(s.a)(Object(s.a)({},a),{},{filterByName:{name:t}}))}})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(Object(s.a)(Object(s.a)({},a),{},{filterByNumericValues:[].concat(Object(u.a)(i),[j])}))}},r.a.createElement("select",{"data-testid":"column-filter",name:"column",value:j.column,onChange:y},E.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",onChange:y,value:j.comparison},["maior que","menor que","igual a"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"population-filter"},r.a.createElement("input",{id:"population-filter","data-testid":"value-filter",type:"number",name:"value",value:j.value,onChange:y})),r.a.createElement("button",{"data-testid":"button-filter",type:"submit"},"Filtrar")))};var p=function(){var e=Object(n.useContext)(o),t=e.filters,a=e.setFilters,l=t.filterByNumericValues;return r.a.createElement("ul",null,l.map((function(e){return r.a.createElement("li",{key:e.column,"data-testid":"filter"},"".concat(e.column," "),"".concat(e.comparison," "),"".concat(e.value),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=l.filter((function(t){return t.column!==e.column}));a(Object(s.a)(Object(s.a)({},t),{},{filterByNumericValues:n}))}(e)}},"X"))})))};var E=function(){var e=Object(n.useContext)(o),t=e.filters,a=e.setFilters,l=Object(n.useState)({column:"population",sort:""}),c=Object(d.a)(l,2),u=c[0],i=c[1],f=function(e){var t=e.target,a=t.name,n=t.value;return i(Object(s.a)(Object(s.a)({},u),{},Object(m.a)({},a,n)))};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(Object(s.a)(Object(s.a)({},t),{},{order:u}))}},r.a.createElement("label",{htmlFor:"order"},"Order:",r.a.createElement("select",{"data-testid":"column-sort",id:"order",name:"column",onChange:f,value:u.column},["population","orbital_period","diameter","rotation_period","surface_water"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"asc"},"Ascendant",r.a.createElement("input",{id:"asc",type:"radio",name:"sort","data-testid":"column-sort-input-asc",value:"ASC",onChange:f})),r.a.createElement("label",{htmlFor:"desc"},"Descendant",r.a.createElement("input",{id:"desc",type:"radio",name:"sort","data-testid":"column-sort-input-desc",value:"DESC",onChange:f})),r.a.createElement("button",{"data-testid":"column-sort-button",type:"submit"},"Order"))};var b=function(){return r.a.createElement("main",{className:"app-container"},r.a.createElement(f,null),r.a.createElement(E,null),r.a.createElement(p,null),r.a.createElement(i,null))},v=a(7),h=a.n(v),j=a(10);var O=function(e){var t=e.children,a=Object(n.useState)({planets:[],isLoading:!0}),l=Object(d.a)(a,2),c=l[0],u=l[1],i=Object(n.useState)({filterByName:{name:""},filterByNumericValues:[],order:{column:"name",sort:"ASC"}}),m=Object(d.a)(i,2),s=m[0],f=m[1];Object(n.useEffect)((function(){(function(){var e=Object(j.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.results,u({planets:n,isLoading:!1});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var p={state:c,setState:u,filters:s,setFilters:f};return r.a.createElement(o.Provider,{value:p},t)};var y=function(){return r.a.createElement(O,null,r.a.createElement(b,null))};c.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.f2436071.chunk.js.map